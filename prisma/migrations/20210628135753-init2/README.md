# Migration `20210628135753-init2`

This migration has been generated by randyarbolaez at 6/28/2021, 9:57:53 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "userId" text   

CREATE UNIQUE INDEX "User.userId_unique" ON "public"."User"("userId")

ALTER TABLE "public"."User" ADD FOREIGN KEY ("userId")REFERENCES "public"."Profile"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."User" ADD FOREIGN KEY ("userId")REFERENCES "public"."Profile"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210628133353-init..20210628135753-init2
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Profile {
   id                String   @id @default(uuid())
@@ -13,10 +13,10 @@
   profilePicture    String?
   userId            String   @unique
   user              User     @relation(fields: [userId], references: [id])
   createdAt         DateTime @default(now())
-  userFollowers     User @relation("followers", fields:[userId], references:[id])
-  userFollwing      User @relation("following", fields:[userId], references:[id])
+  userFollowers         User[] @relation("followers")
+  userFollowing         User[] @relation("following")
 }
 model User {
   id             String     @id @default(uuid())
@@ -24,11 +24,12 @@
   email          String
   password       String
   posts          Post[]
   comments       Comment[]
+  userId         String?   @unique
   profile        Profile?
-  followers      Profile[]  @relation("followers")
-  following      Profile[]  @relation("following")
+  followers      Profile?  @relation("followers", fields:[userId], references:[id])
+  following      Profile?  @relation("following", fields:[userId], references:[id])
   createdAt      DateTime   @default(now())
 }
 model Post {
```


